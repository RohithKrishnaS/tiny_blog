<!DOCTYPE html>
<html>
<head>
    <title>Tiny Blogger</title>
</head>
<body>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        {% for message in messages %}
          <p>{{ message }}</p>
        {% endfor %}
      {% endif %}
    {% endwith %}

    {% if session.get('logged_in') %}
      <p>Welcome! <a href="{{ url_for('logout') }}">Logout</a></p>
      <p><a href="{{ url_for('create') }}">Create New Post</a></p>
    {% else %}
      <p><a href="{{ url_for('login') }}">Login</a></p>
    {% endif %}

    <h1>Posts</h1>
    {% for post in posts %}
        <h2>{{ post.title }}</h2>
        <p>{{ post.content }}</p>
        {% if session.get('logged_in') %}
          <p>
            <a href="{{ url_for('edit', index=loop.index0) }}">Edit</a> |
            <form method="post" action="{{ url_for('delete', index=loop.index0) }}" style="display:inline;">
                <button type="submit">Delete</button>
            </form>
          </p>
        {% endif %}
        <hr>
    {% endfor %}
</body>
</html>
